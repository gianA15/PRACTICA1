<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>PRÁCTICA 1</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<div class="semaphore">
  <div class="spotlight green"></div>
  <div class="spotlight ambar"></div>
  <div class="spotlight red"></div>
  <br>
  <input type="button" onclick="boton()" value="PRESIÓNAME">
</div>

</body>

<script type="text/javascript">

var minutes;


function boton(){
	var minutes = window.prompt('Ingresa el tiempo en minutos');
	var time = minutesTM(minutes);
	var times = timesC(time);

	luces('green');
	window.setTimeout(function() {
  	luces('ambar');
  	window.setTimeout(function() {
    luces('red');
  }, times.ambar);
}, times.green);


	function minutesTM() {
  		return minutes * 60000;  
	}

	function timesC(t) {
  	var time = t;
  	var g = time * .66;
  	time -= g;
  	var a = time / 3;
  	time -= a;
  	var r = time;
  
  	return {
    	green: g,
    	ambar: a,
    	red: r
  	}
}

function luces(color) {
  var actives = document.querySelectorAll('.spotlight.highlight');
  [].forEach.call(actives, function(active) {
    active.classList.remove('highlight');
  });
  var spotlight = document.querySelector(`.spotlight.${color}`);
  spotlight.classList.add('highlight');
}
	if (minutes == false) {
		event.preventDefault();
	}
}

</script>
</html>